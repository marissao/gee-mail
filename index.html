<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>Gee-Mail</title>
		<script src="js/mail-generator.js"></script>
		<link rel="stylesheet" href="css/style.css" media="screen">
		<link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
		<script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
				// console.log('test')
		
				var mainBox = document.createElement('div');
				mainBox.className = 'main';
				document.body.appendChild(mainBox)
				// console.log(mainBox)

				for(var i =0; i<window.geemails.length; i++){
					// console.log(window.geemails[i]);
					// console.log(window.geemails[i].date);
					// console.log(window.geemails[i].sender);
					// console.log(window.geemails[i].subject);
					// console.log(window.geemails[i].body);

					var rowBox = document.createElement('div');
					rowBox.className = 'row';
					mainBox.appendChild(rowBox)
					// console.log(rowBox)

					var dateBox = document.createElement('span');
					dateBox.className = 'when';
					dateBox.innerHTML = window.geemails[i].date;
					rowBox.appendChild(dateBox)
					
					var senderBox = document.createElement('span');
					senderBox.className = 'who';
					senderBox.innerHTML =  window.geemails[i].sender;
					rowBox.appendChild(senderBox)
					
					var subjectBox = document.createElement('span');
					subjectBox.className = 'topic';
					subjectBox.innerHTML =  window.geemails[i].subject;
					rowBox.appendChild(subjectBox)

					var textBox = document.createElement('div');
					textBox.className = 'entireMessage';
					textBox.innerHTML =  window.geemails[i].body;
					rowBox.appendChild(textBox)

					var rowClass = document.getElementsByClassName('row');
					// console.log(rowClass)
					rowClass[i].addEventListener('click', showMessage);

					function showMessage(){
						var popOutMessage = this.querySelector('.entireMessage');
						if(popOutMessage.style.display === 'block'){
							popOutMessage.style.display = 'none';
						}else{
							popOutMessage.style.display = 'block';
						}
					} // END OF FUNCTION SHOWMESSAGE

					
				} // END OF FOR LOOP
				
				



				// console.log(getNewMessage());
	
				var nm = getNewMessage();

				function addNew(){
					var rowBox = document.createElement('div');
					rowBox.className = 'row';
					mainBox.appendChild(rowBox)
					// console.log(rowBox)

					var dateBox = document.createElement('span');
					dateBox.className = 'when';
					dateBox.innerHTML = nm.date;
					rowBox.appendChild(dateBox)
					
					var senderBox = document.createElement('span');
					senderBox.className = 'who';
					senderBox.innerHTML =  nm.sender;
					rowBox.appendChild(senderBox)
					
					var subjectBox = document.createElement('span');
					subjectBox.className = 'topic';
					subjectBox.innerHTML =  nm.subject;
					rowBox.appendChild(subjectBox)

					var textBox = document.createElement('div');
					textBox.className = 'entireMessage';
					textBox.innerHTML =  nm.body;
					rowBox.appendChild(textBox)

					var rowClass = document.getElementsByClassName('row');
					// console.log(rowClass)
					rowClass[i].addEventListener('click', showMessage);

					function showMessage(){
						var popOutMessage = this.querySelector('.entireMessage');
						if(popOutMessage.style.display === 'block'){
							popOutMessage.style.display = 'none';
						}else{
							popOutMessage.style.display = 'block';
						}
					} // END OF FUNCTION SHOWMESSAGE


				}
			
				addNew();
				setInterval(addNew, 3000);
			
				var numberOfRows = document.getElementsByClassName('row');
				// console.log(numberOfRows)
				function countMessage(x){
					return x.length;
				}
				// console.log(countMessage(numberOfRows))
				var sideNavInboxCount = document.createElement('div');
				sideNavInboxCount.id = 'counter';
				sideNavInboxCount.innerHTML= countMessage(numberOfRows);
				amount.appendChild(sideNavInboxCount)

			
      }; // END OF WINDOWS ONLOAD FUNCTION
    </script>
	</head>
	
	<body>
		<header id="headerBox">Gee-Mail</header>
		<br>
		
		<div class="sideNav">
			<div class="subBoxNav">
					<span>
						<a href="#inbox">Inbox</a>
						<span class="fas fa-inbox"></span>
						<div id="amount"></div>
					</span>
					
					
				
			</div>
		
			<div class="subBoxNav">
				<a href="#starred">Starred</a>
			</div>

			<div class="subBoxNav">
				<a href="#snoozed">Snoozed</a>
			</div>

			<div class="subBoxNav">
					<a href="#sent">Sent</a>
			</div>

			<div class="subBoxNav">
					<a href="#drafts">Drafts</a>
			</div>
	
			
				
					
					

				</div>
				
		</div>
		
	</body>
</html>
